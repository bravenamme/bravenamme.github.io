---
layout: post
title:  "자바스크립트 콜백지옥 탈출기 - 2....."
date:   2019-11-01 10:00
author: firepizza
tags:	[javascript, promise, async]
---

# Promise 
지난 시간에는 콜백지옥 이라는 문제에 좌절했다가, Promise를 리턴하는 함수의 체이닝을 통해 문제를 해결해 보았었습니다. 그렇다면 이번에는 조금 더 적극적으로 Promise를 활용하는 방법에 대해 알아보겠습니다.

## 현실의 문제
최근에 트위치 API를 활용해 특정 스트리머를 팔로우/언팔로우 하는 기능을 개발했을 때 만났던 문제인데요, 어떻게 해결할 수 있을지와, Promise를 통해 해결한 방법을 소개해 볼까 합니다.

---
### **요구사항은 아래와 같았습니다.**
- ABC 라는 채널을 팔로우중인지 여부에 따라 팔로우/언팔로우 요청을 보내야 함 
  1. 팔로우여부를 먼저 알아내고..
  1. 해당 여부에 따라 각기 다른 API호출을 해야 함.
- 위에서 필요한 호출을 보내기 위해서는 로그인한 유저의 고유id가 필요함
  - 별도 API호출을 통해 획득

---
사용하는 API는 총 4가지 입니다.

편의상 API 호출에 필요한 몇가지 파라미터와 URL은 생략하겠습니다.
  1. 팔로우 여부를 확인한다. (GET /follow/유저고유ID/channel/ABC)
  1. 채널을 팔로우한다. (PUT /follow/유저고유ID/channel/ABC)
  1. 채널을 언팔로우한다. (DELETE /follow/유저고유ID/channel/ABC)
  1. 유저고유 ID를 얻는다. (GET /user)<br/>
    - 헤더에 로그인중인 유저의 OAuth Token을 담아야 함. (아래 예제에서는 담았다고 치겠습니다.)

---


```javascript


```
 