---
layout: post
title:  AWS Media Service
date:   2020-05-19 22:00
author: sunyung
---

## 지금은 개인방송 시대

최근 개인방송 스트리머 시장은 기업에게 새로운 마케팅 도구로 각광 받고 있다.

게임 방송에서 부터 일상 Vlog, 요리, 교육, 여행 등 다양한 분야로 그 시장은 확대 되고 있다. 

그로인해 방송을 제작하는 개인 혹은 단체들은 자신을 표현하거나 각종 정보를 제공하고 그로 인한 수익을 얻을 수 잇는 새로운 시장이 열린 것이다.

또한 방송을 시청하는 입장에서보면 기존 프로그램에서는 볼 수 없는 새로운 트렌드의 방송 스타일을 접할 수 있고 이제는 블로그 검색이 아닌 동영상으로 직접 보면서 각종 정보를 확인 할 수 있다.

그렇다면 개발지 입장에서 개인방송 플랫폼을 구축하기 위해 어떤 준비를 해야하는지 한번 알아보자. 

최근에 한국 Region 을 추가한 AWS Media Service 를 한번 살펴보자

![https://aws.amazon.com/ko/media-services/](/files/posts/20200416/img1.png)

## Media Connect

MediaConnect는 라이브 비디오 워크플로를 구축하고 라이브 콘텐츠를 파트너 및 고객과 안전하게 공유할 수 있도록 해주는 안정적이고 유연한 라이브 비디오 전송 서비스라고 소개 되어있다.

MediaConnect의 주요 기능은 "전송을 설정하는 Flow의 생성" 이라고 할 수 있다.

아래는 Flow를 생성하는 부분이다.

![https://aws.amazon.com/](/files/posts/20200416/img7.png)

가이드에 따라 Flow의 이름과 서비스 가능한 지역을 설정하고 인바운드 포트 등의 기본적인 설정을 하면 된다.

Flow를 작성한 후 최대 50 개의 출력과 최대 50 개의 권한을 추가 할 수 있다.


## Media Convert

MediaConvert를 사용하면 다양한 인터넷 및 전문 미디어 형식을 사용하여 어느 디바이스에서나 보기 좋은 고품질 비디오 출력을 생성할 수 있다. UHD(Ultra High Definition) 해상도, HDR(High Dynamic Range) 비디오, 그래픽 오버레이 등 파일 기반의 비디오 변환 서비스 이다.

즉 최종 뷰어에게 배포하기 위해 미디어 파일을 다양한 형식과 크기로 패키지와 파일로 트랜스 코딩하는 작업을 수행한다는 것이다.

작업을 생성 할 때 서비스에서 트랜스 코딩을 수행하는 데 필요한 정보, 즉 트랜스 코딩 할 파일, 만들 파일 유형 및 저장할 위치, 사용할 인코딩 설정, 적용 할 고급 기능 등을 지정할 수 있다고 한다.

## Media Live

이 서비스를 사용하면 텔레비전과 인터넷 연결 멀티스크린 디바이스(커넥티드 TV, 태블릿, 스마트폰, 셋톱 박스 등)로 전송할 수 있는 고품질 비디오 스트림을 생성할 수 있다. 

라이브 비디오 스트림을 실시간으로 인코딩하고, 큰 용량의 라이브 비디오 소스를 가져와서 더 작은 버전으로 압축하는 방식으로 수행된다고 한다.

또한 MediaLive는 MediaConnect와 연동되므로, 라이브 채널에 입력으로 사용할 비디오를 안전하고 안정적으로 전송할 수 있다.

아래는 MediaLive는 channel를 생성하는 부분이다.

![https://aws.amazon.com/](/files/posts/20200416/img8.png)

## Media Package

MediaPackage는 단일 비디오 입력으로부터 커넥티드 TV, 휴대폰, 컴퓨터, 태블릿 및 게임 콘솔에 맞는 형식으로 비디오 스트림을 생성한다. 

그리고 시청자를 위해 DVR에서 주로 볼 수 있는 인기 있는 비디오 기능(다시 시작, 정지, 되감기 등)을 손쉽게 구현할 수 있고 DRM(Digital Rights Management)을 사용해 콘텐츠를 보호한다. 

또한 Amazon CloudFront CDN 과 라이브 인코딩을 위한 AWS Elemental MediaLive와 연동되어 완전한 라이브 비디오 처리 및 전송용 솔루션을 구성하도록 설계되어 있다고 한다.

## Media Store

MediaStore는 미디어에 최적화된 AWS 스토리지 서비스이다.

짧은 지연 시간의 읽기와 쓰기를 동시에 제공하며 비디오 버퍼링의 위험을 낮추고 엔드 투 엔드 지연시간을 줄임으로써 시청자에게 일관된 서비스 품질을 제공할 수 있다.
 
수신하는 요청 볼륨에 따라 자동으로 확장되어 로드가 증가해도 시청 경험의 품질에 부정적인 영향을 주지 않는다.

그리고 아래와 같은 장점을 가지고있다.

1.자동 확장성은 용량을 사전에 프로비저닝하는 비용과 복잡성을 없애줌

2.시청자 규모가 줄어들어도 축소 작업을 수행할 필요가 없음

3.서비스에서 변경된 용량에 맞춰 크기를 자동으로 조정함 

4.사용자는 사용한 만큼만 비용을 지불하면 됨


## MediaTailor

MediaTailor를 통해 비디오 스트림에 개별적으로 타겟 광고를 삽입할 수 있다.

각각의 라이브 또는 온디맨드 비디오 시청자가 공급자의 콘텐츠에 시청자에게 개인화된 광고가 결합된 스트림을 수신하게 된다.

광고 노출 수와 시청자 동작을 정확하게 측정할 수 있습니다. 

## Cloud Front

CloudFront는 짧은 지연 시간과 빠른 전송 속도로 데이터, 동영상, 애플리케이션 및 API를 전 세계 고객에게 안전하게 전송하는 고속 콘텐츠 전송 네트워크(CDN) 서비스이다.

다양한 서비스와 원활하게 연동되는 CloudFront는 AWS Shield와 연동되어 DDoS 완화를 수행하고, 애플리케이션 오리진으로서 Amazon S3, Elastic Load Balancing 또는 Amazon EC2를 사용하고, Lambda@Edge와 연동되어 사용자지정 코드를 고객의 사용자에서 가까운 위치에서 실행하고 맞춤화된 사용자 경험을 제공한다고 한다.

## 미디어 서비스에 대한 WorkFlow

![https://aws.amazon.com/](/files/posts/20200416/img9.png)

위와 같이 라이브 또는 동영상 파일 스트림을 구축하기 위한 모든 절차가 AWS 의 Media Service를 활용하여 구축 할 수 있도록 되어있다.
만약 스트리밍 서비스 구축하고 싶다면 AWS Media 서비스를 활용하면 안정성과 개발기간 단축의 효과를 얻을 수 잇을 것이라고 생각한다. 
